(this.webpackJsonppublic=this.webpackJsonppublic||[]).push([[0],{298:function(e,a,t){},372:function(e,a,t){e.exports=t(479)},377:function(e,a,t){},479:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(19),o=t.n(l),c=(t(377),t(3)),i=t(25),s=t(21),u=t(29),m=t(30),d=t(31),b=t(107),f=t(71),p=(t(298),t(35)),h=t(9),E=t(12),g=t(504),v=t(300),y=t(80),k=t(242),C=t(245),O=t(344),w=t.n(O),S=t(343),x=t.n(S),j=t(341),R=t.n(j),I=t(301),N=t(345),B=t.n(N),G=t(342),F=t.n(G),D=t(302),P=t(507),T=t(533),L=t(182),A=t(303),W=t(340),z=t.n(W);var V=function(e){var a=!["/login","/register"].includes(e.location),t=e.location.startsWith("/board")&&"/boards"!==e.location&&!e.location.endsWith("settings")&&!e.location.endsWith("history"),n=Object(b.g)(),l=r.a.useState(!1),o=Object(h.a)(l,2),c=o[0],i=o[1],s=r.a.useState(null),u=Object(h.a)(s,2),m=u[0],d=u[1],f=function(a){d(null),n.push(e.location+"?sort="+a)};r.a.useEffect((function(){p()}),[c]);var p=function(){var e=document.getElementById("taskSearchInput");if(e){var a=e.value.trim();c||(a=a.toLowerCase());var t=document.getElementsByClassName("taskListing");if(""===a)for(var n=0;n<t.length;n++)t[n].classList.remove("search_matches"),t[n].classList.remove("search_no_matches");else for(var r=0;r<t.length;r++){var l=t[r].innerText;c||(l=l.toLowerCase()),l.includes(a)?(t[r].classList.remove("search_no_matches"),t[r].classList.add("search_matches")):(t[r].classList.remove("search_matches"),t[r].classList.add("search_no_matches"))}}};return r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(g.a,{position:"sticky"},r.a.createElement(v.a,{variant:"dense"},r.a.createElement(y.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"Managemit",a&&r.a.createElement(k.a,{href:"/boards",color:"inherit",style:{marginLeft:5}},"Boards")),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{placeholder:"Search for task",onChange:function(){return p()},id:"taskSearchInput",style:{width:"25%",borderRadius:"5px",paddingLeft:5,paddingRight:5,color:"#FFFFFF",backgroundColor:Object(E.d)("#FFFFFF",.15),"&:hover":{backgroundColor:Object(E.d)("#FFFFFF",.25)}}}),r.a.createElement(D.a,{title:"Case sensitivity",arrow:!0},r.a.createElement(T.a,{size:"small",exclusive:!0,value:c,style:{backgroundColor:"inherit"},onChange:function(e,a){i(a)}},r.a.createElement(P.a,{value:!0,style:{border:0,color:"white"}},r.a.createElement(z.a,null)))),r.a.createElement(D.a,{title:"Sort tasks",arrow:!0},r.a.createElement(C.a,{edge:"end","aria-label":"sort",color:"inherit","aria-controls":"sort-menu","aria-haspopup":"true",onClick:function(e){d(e.currentTarget)}},r.a.createElement(R.a,null))),r.a.createElement(L.a,{id:"sort-menu",anchorEl:m,keepMounted:!0,open:Boolean(m),onClose:function(){d(null)}},r.a.createElement(A.a,{onClick:function(){return f("titleAsc")}},"Sort by title (ascending)"),r.a.createElement(A.a,{onClick:function(){return f("titleDesc")}},"Sort by title (descending)"),r.a.createElement(A.a,{onClick:function(){return f("date")}},"Sort by due date"),r.a.createElement(A.a,{onClick:function(){return f("users")}},"Sort by assigned to me")),null!==e.sortMode&&r.a.createElement(D.a,{title:"Return to default task display and unlock functionality",arrow:!0},r.a.createElement(C.a,{edge:"end","aria-label":"unlock",color:"inherit",onClick:function(){d(null),n.push(e.location)}},r.a.createElement(F.a,null)))),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{title:"Notifications",arrow:!0},r.a.createElement(C.a,{edge:"end","aria-label":"notifications",color:"inherit",style:{marginLeft:30}},r.a.createElement(x.a,null))),r.a.createElement(D.a,{title:"User account",arrow:!0},r.a.createElement(C.a,{edge:"end","aria-label":"user account",color:"inherit"},r.a.createElement(w.a,null))),r.a.createElement(D.a,{title:"Log out",arrow:!0},r.a.createElement(C.a,{edge:"end","aria-label":"log out",color:"inherit",onClick:function(){localStorage.removeItem("user"),n.push("/login")}},r.a.createElement(B.a,null)))))))},M=t(514),U=t(113),H=t(530),J=t(513),_=t(508),q=t(512),Z=t(510),$=t(511),K=t(509),Y=t(138),Q=t.n(Y),X=t(529),ee=function(){function e(a){Object(i.a)(this,e),this.subscriptions=[],this.boards=new Map,this.tasks=new Map,this.colGroups=new Map,this.columns=new Map,this.db=a}return Object(s.a)(e,[{key:"loadBoard",value:function(e){if(this.boards.has(e))return this.boards.get(e);var a=new X.a(1);return this.boards.set(e,a),this.subscriptions.push(this.db.collection("boards").doc(e).onSnapshot((function(e){a.next(e)}))),a}},{key:"loadTasks",value:function(e){if(this.tasks.has(e.id))return this.tasks.get(e.id);var a=new X.a(1);return this.tasks.set(e.id,a),this.subscriptions.push(e.ref.collection("tasks").onSnapshot((function(e){a.next(e)}))),a}},{key:"loadColumnGroup",value:function(e,a){var t="".concat(e.id,"-").concat(a);if(this.colGroups.has(t))return this.colGroups.get(t);var n=new X.a(1);return this.colGroups.set(t,n),this.subscriptions.push(e.ref.collection("columnGroups").doc(a).onSnapshot((function(e){n.next(e)}))),n}},{key:"loadColumns",value:function(e){if(this.columns.has(e.id))return this.columns.get(e.id);var a=new X.a(1);return this.columns.set(e.id,a),this.subscriptions.push(e.ref.collection("columns").onSnapshot((function(e){a.next(e)}))),a}}]),e}();Q.a.initializeApp({apiKey:"AIzaSyCEN33oNb29C4H6rUj9H5do_zimBQS7ycI",authDomain:"managemit.firebaseapp.com",databaseURL:"https://managemit.firebaseio.com",projectId:"managemit",storageBucket:"managemit.appspot.com",messagingSenderId:"615143879220",appId:"1:615143879220:web:7e5d434378e0ef98401061",measurementId:"G-Z49YLSWB09"});var ae=new Q.a.auth.GoogleAuthProvider,te=Q.a.auth(),ne=new X.a(1),re=Q.a.firestore(),le=new ee(re),oe=Q.a;function ce(e){return r.a.createElement(H.a,Object.assign({elevation:6,variant:"filled"},e))}te.onAuthStateChanged((function(e){ne.next(e)}));var ie=function(){var e=r.a.useState(!1),a=Object(h.a)(e,2),t=a[0],n=a[1],l=r.a.useState(!1),o=Object(h.a)(l,2),c=o[0],i=o[1],s=r.a.useState(""),u=Object(h.a)(s,2),m=u[0],d=u[1],b=r.a.useState(!1),f=Object(h.a)(b,2),p=f[0],E=f[1],g=/^(([^<>()[\]\\.,;:\s@']+(\.[^<>()[\]\\.,;:\s@']+)*)|('.+'))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,v=function(){n(!1),E(!1)},y=function(){i(!1),d(""),E(!1)};return r.a.createElement("div",null,r.a.createElement(k.a,{onClick:function(){n(!0)}},"Forgot password?"),r.a.createElement(_.a,{open:t,onClose:v,"aria-labelledby":"form-dialog-title"},r.a.createElement(K.a,{id:"form-dialog-title"},"Reset password"),r.a.createElement(Z.a,null,r.a.createElement($.a,null,"Enter your email. If the email is already associated with an account, you will recieve an email with a new password."),r.a.createElement(I.a,{error:c,helperText:m,autoFocus:!0,margin:"dense",id:"forgotPasswordEmail",label:"Email",type:"email",variant:"outlined",fullWidth:!0})),r.a.createElement(q.a,null,r.a.createElement(k.a,{onClick:v},"Cancel"),r.a.createElement(k.a,{onClick:function(){return e=document.getElementById("forgotPasswordEmail").value,y(),void(""===e?(i(!0),d("Email is required")):g.test(e)?(te.sendPasswordResetEmail(e).then((function(e){v()})).catch((function(e){})),E(!0)):(i(!0),d("Email must be properly formatted")));var e},color:"primary"},"Reset password"))),r.a.createElement(J.a,{open:p,onClose:v},r.a.createElement(ce,{onClose:v,autoHideDuration:6e3,severity:"success"},"If an account with this email exists, an email to reset the password has been sent")))},se=t(183),ue=function(){return Object(se.a)((function(e){return{loginBody:{margin:20},loginPaper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},loginButton:{marginRight:5,marginLeft:5},loginTextField:{width:"80%"},passwordStrengthBar:{marginRight:"15%",marginLeft:"15%",marginTop:"2%"}}}))()};function me(e){return r.a.createElement(H.a,Object.assign({elevation:6,variant:"filled"},e))}var de=function(e){var a=ue(),t=Object(b.g)(),n=r.a.useState(!1),l=Object(h.a)(n,2),o=l[0],c=l[1],i=r.a.useState(""),s=Object(h.a)(i,2),u=s[0],m=s[1],d=r.a.useState(!1),p=Object(h.a)(d,2),E=p[0],g=p[1],v=r.a.useState(""),y=Object(h.a)(v,2),C=y[0],O=y[1],w=r.a.useState(!1),S=Object(h.a)(w,2),x=S[0],j=S[1],R=r.a.useState(""),N=Object(h.a)(R,2),B=N[0],G=N[1],F=/^(([^<>()[\]\\.,;:\s@']+(\.[^<>()[\]\\.,;:\s@']+)*)|('.+'))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,D=function(){c(!1),m(""),g(!1),O(""),j(!1),G("")},P=function(e,a){"clickaway"!==a&&j(!1)};return r.a.createElement("div",{className:a.loginBody},r.a.createElement(M.a,{container:!0,justify:"center",xs:12},r.a.createElement(M.a,{container:!0,spacing:3,xs:4},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(U.a,{className:a.loginPaper},r.a.createElement("h2",null,"Welcome to Managemit"),r.a.createElement("p",null,"Keep track of your tasks and work collaboratively. Log in or register to get started."))),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(U.a,{className:a.loginPaper},r.a.createElement("h2",null,"Log in"),r.a.createElement(M.a,{container:!0,spacing:3},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(I.a,{id:"email",error:o,helperText:u,label:"Email",type:"email",variant:"outlined",className:a.loginTextField})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(I.a,{id:"password",error:E,helperText:C,label:"Password",variant:"outlined",type:"password",className:a.loginTextField})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(k.a,{variant:"contained",color:"primary",className:a.loginButton,onClick:function(){return e=document.getElementById("email").value,a=document.getElementById("password").value,D(),void(""===e?(c(!0),m("Email is required")):F.test(e)?""===a?(g(!0),O("Password is required")):a.length<6?(g(!0),O("Password must be greater than 6 characters long")):a.length>128?(g(!0),O("Password must be less than 128 characters long")):te.signInWithEmailAndPassword(e,a).then((function(e){localStorage.setItem("user",JSON.stringify(e.user)),t.push("/boards")})).catch((function(a){te.fetchSignInMethodsForEmail(e).then((function(e){"google.com"===e[0]?(j(!0),G("This email is associated with a Google account. Please login via Google")):(j(!0),G("The email and/or password is incorrect. Please try again"))})).catch((function(e){j(!0),G(e.message)}))})):(c(!0),m("Email must be properly formatted")));var e,a}},"Log in"),r.a.createElement(k.a,{variant:"contained",className:a.loginButton,onClick:function(){te.signInWithPopup(ae).then((function(e){localStorage.setItem("user",JSON.stringify(e.user)),t.push("/boards")})).catch((function(e){j(!0),G(e.message)}))}},"Log in with Google")),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(f.b,{to:"/register"},r.a.createElement(k.a,{variant:"contained",color:"primary",className:a.loginButton},"Register a new account"))),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(ie,null))))))),r.a.createElement(J.a,{open:x,onClose:P},r.a.createElement(me,{onClose:P,autoHideDuration:6e3,severity:"error"},B)))},be=function(e){var a=Object(p.a)();return r.a.createElement("div",null,r.a.createElement(V,{location:a.location.pathname}),r.a.createElement(de,null))},fe=t(305);function pe(e){return r.a.createElement(H.a,Object.assign({elevation:6,variant:"filled"},e))}var he=function(e){var a=ue(),t=/^(([^<>()[\]\\.,;:\s@']+(\.[^<>()[\]\\.,;:\s@']+)*)|('.+'))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,n=new RegExp("(?=.*[A-Z])"),l=new RegExp("(?=.*[0-9])"),o=new RegExp("(?=.[!@#$%^&])"),c=r.a.useState(!1),i=Object(h.a)(c,2),s=i[0],u=i[1],m=r.a.useState(""),d=Object(h.a)(m,2),b=d[0],f=d[1],p=r.a.useState(!1),E=Object(h.a)(p,2),g=E[0],v=E[1],y=r.a.useState(""),C=Object(h.a)(y,2),O=C[0],w=C[1],S=r.a.useState(!1),x=Object(h.a)(S,2),j=x[0],R=x[1],N=r.a.useState(""),B=Object(h.a)(N,2),G=B[0],F=B[1],D=r.a.useState(!1),P=Object(h.a)(D,2),T=P[0],L=P[1],A=r.a.useState(!1),W=Object(h.a)(A,2),z=W[0],V=W[1],H=r.a.useState(0),_=Object(h.a)(H,2),q=_[0],Z=_[1],$=function(e){Z(0);var a=0;return e.length>6&&(a+=15),e.length>12&&(a+=20),n.test(e)&&(a+=20),l.test(e)&&(a+=20),o.test(e)&&(a+=25),a},K=function(){u(!1),f(""),v(!1),w(""),R(!1),F(""),V(!1),L(!1)},Y=function(e,a){"clickaway"!==a&&(L(!1),V(!1))};return r.a.createElement("div",{className:a.loginBody},r.a.createElement(M.a,{container:!0,justify:"center",xs:12},r.a.createElement(M.a,{container:!0,spacing:3,xs:4},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(U.a,{className:a.loginPaper},r.a.createElement("h2",null,"Welcome to Managemit"),r.a.createElement("p",null,"Keep track of your tasks and work collaboratively. Log in or register to get started."))),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(U.a,{className:a.loginPaper},r.a.createElement("h2",null,"Register"),r.a.createElement(M.a,{container:!0,spacing:3},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(I.a,{error:j,helperText:G,label:"Email",type:"email",variant:"outlined",id:"email",className:a.loginTextField})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(I.a,{onChange:function(){var e=document.getElementById("password").value;Z($(e))}.bind(),error:s,helperText:b,label:"Password",type:"password",variant:"outlined",id:"password",className:a.loginTextField}),r.a.createElement(fe.a,{className:a.passwordStrengthBar,variant:"determinate",value:q,color:"primary"})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(I.a,{error:g,helperText:O,label:"Re-enter password",type:"password",variant:"outlined",id:"repassword",className:a.loginTextField})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(k.a,{variant:"contained",color:"primary",className:a.loginButton,onClick:function(){return e=document.getElementById("email").value,a=document.getElementById("password").value,n=document.getElementById("repassword").value,K(),void(""===e?(R(!0),F("Email is required")):t.test(e)?a.length<6?(u(!0),f("Password must be greater 6 characters long")):a.length>128?(u(!0),f("Password cannot be greater than 128 characters long")):a!==n?(u(!0),f("Passwords must match"),v(!0),w("Passwords must match")):te.createUserWithEmailAndPassword(e,a).then((function(e){V(!0)})).catch((function(e){console.log(e),"auth/email-already-in-use"===e.code?(R(!0),F("Email already in use - have you already registered an account?")):L(!0)})):(R(!0),F("Email must be properly formatted")));var e,a,n}},"Register"))))))),r.a.createElement(J.a,{open:z,onClose:Y},r.a.createElement(pe,{onClose:Y,autoHideDuration:6e3,severity:"success"},"Account successfully created!")),r.a.createElement(J.a,{open:T,onClose:Y},r.a.createElement(pe,{onClose:Y,autoHideDuration:6e3,severity:"success"},"There was an error creating an account!")))},Ee=function(e){var a=Object(p.a)();return r.a.createElement("div",null,r.a.createElement(V,{location:a.location.pathname}),r.a.createElement(he,null))},ge=t(532),ve=t(42),ye=t.n(ve),ke=t(75),Ce=t(515),Oe=["Backlog","In Progress","Reviewing","Complete"],we=function(){var e=Object(ke.a)(ye.a.mark((function e(a,t){return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){re.collection("boards").add({owner:te.currentUser.email,label:a,description:t,defaultColumnGroup:"",taskRefs:[],userRefs:[te.currentUser.email]}).then((function(e){return e.collection("columnGroups").add({label:"Default Group"})})).then(function(){var e=Object(ke.a)(ye.a.mark((function e(a){var t,n,r,l,o,c,i,s;return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=!0,r=!1,l=void 0,e.prev=4,o=Oe[Symbol.iterator]();case 6:if(n=(c=o.next()).done){e.next=15;break}return i=c.value,e.next=10,a.collection("columns").add({label:i,taskRefs:[]});case 10:s=e.sent,t.push(s.id);case 12:n=!0,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),r=!0,l=e.t0;case 21:e.prev=21,e.prev=22,n||null==o.return||o.return();case 24:if(e.prev=24,!r){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.next=31,a.set({columnOrder:t},{merge:!0});case 31:case"end":return e.stop()}}),e,null,[[4,17,21,29],[22,,24,28]])})));return function(a){return e.apply(this,arguments)}}()).then((function(){e()})).catch((function(e){n(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}();var Se=function(){var e=r.a.useState(!1),a=Object(h.a)(e,2),t=a[0],n=a[1],l=r.a.useState(!1),o=Object(h.a)(l,2),c=o[0],i=o[1],s=r.a.useState(""),u=Object(h.a)(s,2),m=u[0],d=u[1],b=r.a.useState(!1),f=Object(h.a)(b,2),p=f[0],E=f[1],g=r.a.useState(""),v=Object(h.a)(g,2),y=v[0],C=v[1],O=function(e,a){n(!1)},w=function(){var e=Object(ke.a)(ye.a.mark((function e(){var a,t;return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=document.getElementById("newBoardName").value.trim(),t=document.getElementById("newBoardDescription").value.trim(),S(),""===a)i(!0),d("Board name is required");else if(a.length>50)i(!0),d("Board name must be less than 50 characters long");else if(t.length>150)E(!0),C("Board description must be greater than 150 characters long");else try{n(!1),we(a,t).catch((function(e){console.error(e)}))}catch(r){n(!0),i(!0),d("Board could not be created!")}case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){i(!1),d(""),E(!1),C("")};return r.a.createElement("div",null,r.a.createElement(Ce.a,{size:"small"},r.a.createElement(k.a,{onClick:function(){n(!0)}},"New board")),r.a.createElement(_.a,{open:t,onClose:O,"aria-labelledby":"form-dialog-title"},r.a.createElement(K.a,{id:"form-dialog-title"},"New board"),r.a.createElement(Z.a,null,r.a.createElement($.a,null,"Enter a name for your new board."),r.a.createElement(I.a,{autoFocus:!0,margin:"dense",id:"newBoardName",label:"Board name",variant:"outlined",fullWidth:!0,error:c,helperText:m}),r.a.createElement(I.a,{margin:"dense",id:"newBoardDescription",label:"Board description (optional)",rows:"5",variant:"outlined",multiline:!0,fullWidth:!0,error:p,helperText:y})),r.a.createElement(q.a,null,r.a.createElement(k.a,{onClick:O},"Cancel"),r.a.createElement(k.a,{onClick:w,color:"primary"},"Create board"))))};var xe=function(e){return r.a.createElement(M.a,{container:!0,style:{padding:"10px 10px 0px 10px"}},r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(ge.a,{"aria-label":"breadcrumbs"},r.a.createElement(y.a,{color:"textPrimary"},"Boards"))),r.a.createElement(Se,null))},je=Object(se.a)((function(e){return{paper:{padding:e.spacing(2)}}}));var Re=function(e){var a=je(),t=Object(b.g)(),n=JSON.parse(localStorage.getItem("user")),l="/board/"+e.board.id;return r.a.createElement(M.a,{item:!0,xs:3},r.a.createElement(U.a,{className:a.paper,style:{cursor:"pointer"},onClick:function(){t.push(l)}},r.a.createElement(y.a,{variant:"h6",component:"h2",style:{textAlign:"center"}},e.board.label),r.a.createElement(y.a,{variant:"body2",component:"p",size:"small",style:{textAlign:"center"}},e.board.owner===n.email?"Owner - ":"",e.board.userRefs.length," collaborator",e.board.userRefs.length>1?"s":""),r.a.createElement(y.a,{variant:"body2",component:"p"},r.a.createElement("br",null),""===e.board.description?"(No description provided)":e.board.description)))},Ie=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(u.a)(this,Object(m.a)(a).call(this,e))).state={},t.userSub=ne.subscribe((function(e){t.loadBoards(e)})),t}return Object(d.a)(a,e),Object(s.a)(a,[{key:"loadBoards",value:function(e){var a=this;this.boardsSub&&this.boardsSub(),this.boardsSub=re.collection("boards").where("userRefs","array-contains",e.email).orderBy("label","asc").onSnapshot((function(e){a.setState({boardsRefs:e.docs.map((function(e){var a=e.data();return a.id=e.id,a}))})}))}},{key:"componentWillUnmount",value:function(){this.boardsSub&&this.boardsSub(),this.userSub&&this.userSub.unsubscribe()}},{key:"render",value:function(){return r.a.createElement("div",{style:{width:"80%",margin:"10px auto 0px auto"}},r.a.createElement(M.a,{container:!0,spacing:3},this.state.boardsRefs&&r.a.createElement(r.a.Fragment,null,this.state.boardsRefs.map((function(e){return r.a.createElement(Re,{key:e.id,board:e})})))))}}]),a}(r.a.Component);var Ne=function(e){return r.a.createElement("div",null,r.a.createElement(xe,null),r.a.createElement(Ie,null))},Be=function(e){var a=Object(p.a)();return r.a.createElement("div",null,r.a.createElement(V,{location:a.location.pathname}),r.a.createElement(Ne,null))};var Ge=function(e){return r.a.createElement(ge.a,{"aria-label":"breadcrumbs"},r.a.createElement(f.b,{to:"/boards",color:"inherit"},"Boards"),r.a.createElement(y.a,{color:"textPrimary"},e.board?e.board.label:""))},Fe=t(22),De=t(247),Pe=t(244),Te=t(346),Le=t.n(Te),Ae=t(347),We=t.n(Ae),ze=t(243),Ve=t(516),Me=t(306),Ue=t(332);var He=function(e){var a=r.a.useState(!1),t=Object(h.a)(a,2),n=t[0],l=t[1],o=r.a.useState(!1),c=Object(h.a)(o,2),i=c[0],s=c[1],u=r.a.useState(""),m=Object(h.a)(u,2),d=m[0],b=m[1],f=r.a.useState(!1),p=Object(h.a)(f,2),E=p[0],g=p[1],v=r.a.useState(""),O=Object(h.a)(v,2),w=O[0],S=O[1],x=r.a.useState(!1),j=Object(h.a)(x,2),R=j[0],N=j[1],B=r.a.useState(""),G=Object(h.a)(B,2),F=G[0],D=G[1],P=r.a.useState(!1),T=Object(h.a)(P,2),L=T[0],W=T[1],z=r.a.useState(""),V=Object(h.a)(z,2),U=V[0],H=V[1],J=r.a.useState(!1),$=Object(h.a)(J,2),K=$[0],Y=$[1],Q=r.a.useState(""),X=Object(h.a)(Q,2),ee=X[0],ae=X[1],te=r.a.useState([]),ne=Object(h.a)(te,2),le=ne[0],ce=ne[1],ie=JSON.parse(localStorage.getItem("user")),se=function(){l(!1)},ue=function(){s(!1),b(""),W(!1),H(""),g(!1),S(""),N(!1),D("")},me=function(){Y(!1),ae("")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce.a,{size:"small"},r.a.createElement(k.a,Object.assign({},e,{onClick:function(){ue(),me(),ce([]),l(!0)}}),"New task")),r.a.createElement(_.a,{open:n,onClose:se,"aria-labelledby":"form-dialog-title"},r.a.createElement(Z.a,null,r.a.createElement(M.a,{container:!0,spacing:1},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(y.a,{variant:"h6",component:"h2"},"Basic details")),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(I.a,{autoFocus:!0,margin:"dense",id:"taskTitle",label:"Title",variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0},error:i,helperText:d})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(I.a,{margin:"dense",id:"taskDescription",label:"Description",rows:"5",variant:"outlined",multiline:!0,fullWidth:!0,InputLabelProps:{shrink:!0},error:E,helperText:w})),r.a.createElement(M.a,{item:!0,xs:6},r.a.createElement(I.a,{margin:"dense",id:"taskDueDate",label:"Due date",type:"date",variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0},error:R,helperText:F})),r.a.createElement(M.a,{item:!0,xs:6},r.a.createElement(I.a,{margin:"dense",id:"taskFile",label:"Files",type:"file",variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0}})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(y.a,{variant:"h6",component:"h2"},"Checklist")),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(I.a,{margin:"dense",id:"taskChecklist",label:"New checklist item",variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0},style:{width:"90%"},error:K,helperText:ee}),r.a.createElement(C.a,{onClick:function(){var e=document.getElementById("taskChecklist").value.trim();me(),""===e?(Y(!0),ae("Checklist item cannot be blank")):e.length>500?(Y(!0),ae("Checklist item must be less than 500 characters")):(ce([].concat(Object(Fe.a)(le),[{text:e,completed:!1}])),document.getElementById("taskChecklist").value="")},"aria-label":"add checklist item",style:{float:"right"}},r.a.createElement(Le.a,null))),le.length>0&&r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(ze.a,{component:"fieldset"},r.a.createElement(Ve.a,null,le.map((function(e,a){return r.a.createElement(M.a,{item:!0,xs:12,key:a},r.a.createElement(Me.a,{control:r.a.createElement(Ue.a,{defaultValue:e.completed,onClick:function(e){return function(e,a){var t=le.slice(0);t[a].completed=e.target.checked,ce(t)}(e,a)}}),label:e.text}),r.a.createElement(C.a,{onClick:function(){return function(e){var a=le.slice(0);a.splice(e,1),ce(a)}(a)}},r.a.createElement(We.a,null)))}))))),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(y.a,{variant:"h6",component:"h2"},"Columns and collaborators")),e.allColGroups&&e.allColGroups.map((function(a){return r.a.createElement("div",{key:a.id,style:{width:"100%"}},U&&r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(y.a,{variant:"caption",color:"secondary"},U)),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(ze.a,{key:a.id,style:{width:"100%"}},r.a.createElement(Pe.a,{id:"group-input-label-"+a.id},"Column for ",a.data().label),r.a.createElement(De.a,{id:a.id,fullWidth:!0,defaultValue:"",margin:"dense",labelId:"group-input-label-"+a.id,error:L,name:"taskColumnGroup"},r.a.createElement(A.a,{value:""},"(None)"),e.allCols&&e.allCols[a.id]&&e.allCols[a.id].map((function(e){return r.a.createElement(A.a,{key:e.id,value:e.id},e.data().label)}))))))})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(ze.a,{style:{width:"100%"}},r.a.createElement(Pe.a,{id:"users-input-label"},"Users"),r.a.createElement(De.a,{id:"taskUsers",label:"Users",multiple:!0,margin:"dense",fullWidth:!0,defaultValue:[],style:{marginTop:12},labelId:"users-input-label"},e.board.userRefs&&e.board.userRefs.map((function(e){return r.a.createElement(A.a,{key:e,value:e},e)}))))),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(y.a,{variant:"h6",component:"h2"},"Task relations")),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(I.a,{margin:"dense",id:"taskDependencies",label:"Dependencies",variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0}})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(I.a,{margin:"dense",id:"taskDependents",label:"Dependents",variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0}})))),r.a.createElement(q.a,null,r.a.createElement(k.a,{onClick:se},"Cancel"),r.a.createElement(k.a,{onClick:function(){var a=document.getElementById("taskTitle").value.trim(),t=document.getElementById("taskDescription").value.trim(),n=document.getElementById("taskDueDate").valueAsDate;null!=n&&(n=new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()));var r=document.querySelectorAll('[name="taskColumnGroup"]'),o={},c=[],i=!0,u=!1,m=void 0;try{for(var d,f=r[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){var p=d.value;""!==p.value&&(o[p.previousSibling.id]=p.value,c.push(p.value))}}catch(y){u=!0,m=y}finally{try{i||null==f.return||f.return()}finally{if(u)throw m}}var h=document.getElementById("taskUsers").textContent.split(", ");h=h.filter((function(e){return e.trim().length>1})),ue();var E=!1;a.length||(E=!0,s(!0),b("Title is required")),a.length>500&&(E=!0,s(!0),b("Title must be less than 500 characters")),t.length>5e3&&(E=!0,g(!0),S("Description must be less than 5000 characters")),Object.keys(o).length||(E=!0,W(!0),H("At least one column is required"));var v=new Date;v.setHours(0,0,0,0),null!==n&&n<v&&(E=!0,N(!0),D("Date cannot be in the past")),E||(l(!1),e.boardRef.ref.collection("tasks").add({title:a,desc:t,date:n,users:h,columnRefs:c,checklist:le}).then((function(a){var t=[];return Object.keys(o).forEach((function(n){t.push(e.boardRef.ref.collection("columnGroups").doc(n).collection("columns").doc(o[n]).update({taskRefs:oe.firestore.FieldValue.arrayUnion(a.id)}))})),Promise.all(t)})).then((function(t){return re.collection("boards").doc(e.boardRef.id).collection("history").add({user:ie.email,taskName:a,action:7,timestamp:oe.database.ServerValue})})).catch((function(e){return console.error("Error in adding task:",e)})))},color:"primary"},"Create task"))))};var Je=function(e){var a=r.a.useState(!1),t=Object(h.a)(a,2),n=t[0],l=t[1],o=r.a.useState(!1),c=Object(h.a)(o,2),i=c[0],s=c[1],u=r.a.useState(""),m=Object(h.a)(u,2),d=m[0],b=m[1],f=JSON.parse(localStorage.getItem("user")),p=[],E=!0,g=!1,v=void 0;try{for(var y,C=e.columns[Symbol.iterator]();!(E=(y=C.next()).done);E=!0){var O=y.value;p.push(O.label)}}catch(j){g=!0,v=j}finally{try{E||null==C.return||C.return()}finally{if(g)throw v}}var w=function(){l(!1)},S=function(){var a=Object(ke.a)(ye.a.mark((function a(){var t;return ye.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=document.getElementById("columnName").value.trim(),x(),""===t?(s(!0),b("Column name is required")):t.length>50?(s(!0),b("Column name must be less than 50 characters")):p.includes(t)?(s(!0),b("Column name is already in use")):(l(!1),re.runTransaction(function(){var a=Object(ke.a)(ye.a.mark((function a(n){var r,l,o;return ye.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,re.collection("boards").doc(e.boardRef.id).collection("columnGroups").doc(e.columnGroupRef.id);case 2:return r=a.sent,a.next=5,r.collection("columns").add({label:t,taskRefs:[]});case 5:return l=a.sent,a.next=8,r.get();case 8:return(o=a.sent.data().columnOrder).push(l.id),a.next=12,r.update({columnOrder:o});case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).then((function(a){re.collection("boards").doc(e.boardRef.id).collection("history").add({user:f.email,colName:t,action:4,timestamp:oe.database.ServerValue}).catch((function(e){console.log("Error logging new column: "+e)}))})));case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),x=function(){s(!1),b("")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce.a,{size:"small"},r.a.createElement(k.a,Object.assign({},e,{onClick:function(){x(),l(!0)}}),"New column")),r.a.createElement(_.a,{open:n,onClose:w,"aria-labelledby":"form-dialog-title"},r.a.createElement(K.a,{id:"form-dialog-title"},"New column"),r.a.createElement(Z.a,null,r.a.createElement(M.a,{container:!0,spacing:1},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(I.a,{autoFocus:!0,id:"columnName",label:"Column name",variant:"outlined",fullWidth:!0,margin:"dense",InputLabelProps:{shrink:!0},error:i,helperText:d})))),r.a.createElement(q.a,null,r.a.createElement(k.a,{onClick:w},"Cancel"),r.a.createElement(k.a,{onClick:S,color:"primary"},"Create column"))))},_e=t(487),qe=t(490),Ze=t(307),$e=Object(se.a)((function(e){return{list:{backgroundColor:e.palette.background.paper}}}));var Ke=function(e){var a=$e(),t=r.a.useState(!1),n=Object(h.a)(t,2),l=n[0],o=n[1],c=function(){o(!1)},i=Array.isArray(e.allColGroups)?e.allColGroups:[],s=Array.isArray(e.allCols)?e.allCols:[],u=i.map((function(e,a){if(s.length<=a)return{label:e.label,id:e.id,columnNames:[]};var t=s[a].map((function(e){return e.label}));return{label:e.label,id:e.id,columnNames:t}}));return r.a.createElement("div",null,r.a.createElement(Ce.a,{size:"small"},r.a.createElement(k.a,{onClick:function(){o(!0)}},"Select view")),r.a.createElement(_.a,{open:l,onClose:c,"aria-labelledby":"form-dialog-title"},r.a.createElement(K.a,{id:"form-dialog-title"},"Select view"),r.a.createElement(Z.a,null,r.a.createElement(M.a,{container:!0,spacing:1},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(_e.a,{className:a.list},u.map((function(e,a){return r.a.createElement(qe.a,{key:e.id},r.a.createElement(Ze.a,{primary:e.label,secondary:e.columnNames.join(", ")}))})))))),r.a.createElement(q.a,null,r.a.createElement(k.a,{onClick:c},"Cancel"))))},Ye=t(517),Qe=t(334);var Xe=function(e){var a=r.a.useState(!1),t=Object(h.a)(a,2),n=t[0],l=t[1],o=r.a.useState(!1),c=Object(h.a)(o,2),i=c[0],s=c[1],u=r.a.useState(""),m=Object(h.a)(u,2),d=m[0],b=m[1],f=r.a.useState(!1),p=Object(h.a)(f,2),E=p[0],g=p[1],v=r.a.useState(""),y=Object(h.a)(v,2),C=y[0],O=y[1],w=r.a.useState([]),S=Object(h.a)(w,2),x=S[0],j=S[1],R=(Array.isArray(e.allColGroups)?e.allColGroups:[]).map((function(e){return e.label})),N=function(){l(!1)},B=function(){s(!1),b(""),G()},G=function(){g(!1),O("")};return r.a.createElement("div",null,r.a.createElement(Ce.a,{size:"small"},r.a.createElement(k.a,{onClick:function(){B(),j([]),l(!0)}},"New view")),r.a.createElement(_.a,{open:n,onClose:N,"aria-labelledby":"form-dialog-title"},r.a.createElement(K.a,{id:"form-dialog-title"},"New view"),r.a.createElement(Z.a,null,r.a.createElement($.a,null,"Enter a name for your new view."),r.a.createElement(I.a,{autoFocus:!0,id:"newViewName",label:"View name",variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0},error:i,helperText:d}),r.a.createElement(Ye.a,{style:{margin:10}}),r.a.createElement($.a,null,"Optionally, enter a set of columns for your new view. Columns can be added, deleted, renamed, or rearranged later.",r.a.createElement("br",null),r.a.createElement("br",null),"While not required at this step, at least one column must be added to the board before any tasks can be created."),r.a.createElement(M.a,{container:!0,spacing:1},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(I.a,{id:"newColumnName",label:"Column name",variant:"outlined",InputLabelProps:{shrink:!0},error:E,helperText:C,style:{width:"85%"}}),r.a.createElement(k.a,{variant:"contained",color:"primary",style:{height:"100%",width:"15%"},onClick:function(){var e=document.getElementById("newColumnName").value.trim();G(),""===e?(g(!0),O("Column name cannot be blank")):e.length>50?(g(!0),O("Column name must be less than 50 characters")):x.includes(e)?(g(!0),O("Column name is already in use")):(j([].concat(Object(Fe.a)(x),[e])),document.getElementById("newColumnName").value="")}},"Add"))),x.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{style:{margin:10}}),r.a.createElement($.a,null,"Column names"),r.a.createElement(M.a,{container:!0,spacing:1},r.a.createElement(M.a,{item:!0,xs:12},x.map((function(e){return r.a.createElement(Qe.a,{label:e,key:e,onDelete:function(){return a=e,void j(x.slice(0).filter((function(e){return e!==a})));var a},style:{marginLeft:5,marginRight:5}})})))))),r.a.createElement(q.a,null,r.a.createElement(k.a,{onClick:N},"Cancel"),r.a.createElement(k.a,{onClick:function(){var e=document.getElementById("newViewName").value.trim();B(),""===e?(s(!0),b("View name cannot be blank")):e.length>50?(s(!0),b("View name must be less than 50 characters")):R.includes(e)?(s(!0),b("View name is already in use")):console.log("TODO: actually create it")},color:"primary"},"Create view"))))},ea=t(308),aa=t(312),ta=t(311),na=t(518),ra=t(309),la=t(310),oa=t(519);var ca=function(e){var a=JSON.parse(localStorage.getItem("user")),t=r.a.useState(!1),n=Object(h.a)(t,2),l=n[0],o=n[1],c=function(){o(!1)};return r.a.createElement("div",null,r.a.createElement(Ce.a,{size:"small"},r.a.createElement(k.a,{onClick:function(){o(!0)}},"Collaborators")),r.a.createElement(_.a,{open:l,onClose:c,"aria-labelledby":"form-dialog-title"},r.a.createElement(K.a,{id:"form-dialog-title"},"Collaborators for ",e.board.label),r.a.createElement(Z.a,null,e.board.owner===a.email&&r.a.createElement($.a,null,"As the board owner, you can add and remove users as well as change permissions from the ",r.a.createElement("a",{href:"/board/"+e.boardRef.id+"/settings"},"board settings")," page."),r.a.createElement(na.a,null,r.a.createElement(ea.a,{size:"small"},r.a.createElement(ra.a,null,r.a.createElement(la.a,null,r.a.createElement(ta.a,null,"Role"),r.a.createElement(ta.a,null,"Email"),r.a.createElement(ta.a,{align:"right"},"Can edit"))),r.a.createElement(aa.a,null,r.a.createElement(la.a,null,r.a.createElement(ta.a,null,"Owner"),r.a.createElement(ta.a,null,e.board&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Qe.a,{label:e.board.owner,color:"primary"}))),r.a.createElement(ta.a,{align:"right"},r.a.createElement(oa.a,{checked:!0,disabled:!0,color:"primary"}))),e.board&&e.board.userRefs&&r.a.createElement(r.a.Fragment,null,e.board.userRefs.filter((function(a){return a!==e.board.owner})).map((function(e){return r.a.createElement(la.a,{key:e},r.a.createElement(ta.a,null,"Member"),r.a.createElement(ta.a,null,r.a.createElement(Qe.a,{label:e,color:"primary",key:e,variant:"outlined"})),r.a.createElement(ta.a,{align:"right"},r.a.createElement(oa.a,{checked:!1,disabled:!0,color:"primary"})))}))))))),r.a.createElement(q.a,null,r.a.createElement(k.a,{onClick:c},"Close"))))};var ia=function(e){var a=JSON.parse(localStorage.getItem("user"));return r.a.createElement(M.a,{container:!0,style:{padding:"10px 10px 0px 10px"}},r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(Ge,{board:e.board})),e.board&&r.a.createElement(Ce.a,{size:"small"},!e.lockFunctionality&&r.a.createElement(r.a.Fragment,null,r.a.createElement(He,{boardRef:e.boardRef,board:e.board,columns:e.columns,allColGroups:e.allColGroups,allCols:e.allCols}),r.a.createElement(Je,{boardRef:e.boardRef,columnGroupRef:e.columnGroupRef,columns:e.columns}),r.a.createElement(Xe,{boardRef:e.boardRef,board:e.board,allColGroups:e.allColGroups})),r.a.createElement(Ke,{boardRef:e.boardRef,board:e.board,allColGroups:e.allColGroups,allCols:e.allCols}),r.a.createElement(Ce.a,{size:"small"},r.a.createElement(k.a,null,"Calendar")),r.a.createElement(ca,{boardRef:e.boardRef,board:e.board}),r.a.createElement(Ce.a,{size:"small"},r.a.createElement(k.a,{href:"/board/"+e.boardRef.id+"/history"},"History")),a&&e.board.owner===a.email&&r.a.createElement(Ce.a,{size:"small"},r.a.createElement(k.a,{href:"/board/"+e.boardRef.id+"/settings"},"Settings"))))},sa=t(524),ua=t(523),ma=t(520),da=t(521),ba=t(522),fa=t(209),pa=t.n(fa),ha=t(348),Ea=t.n(ha);var ga=function(e){var a=r.a.useState(!1),t=Object(h.a)(a,2),n=t[0],l=t[1],o=JSON.parse(localStorage.getItem("user")),c=function(){l(!1)};return r.a.createElement(ma.a,{variant:"outlined",style:{marginBottom:5}},r.a.createElement(da.a,{onClick:function(){l(!0)},style:{cursor:"pointer"},className:"taskListing"},r.a.createElement(y.a,{variant:"h6",component:"h2"},e.task.title.length<30?e.task.title:e.task.title.slice(0,30)+"..."),r.a.createElement(y.a,{variant:"body2",component:"p"},e.task.desc.length<300?e.task.desc:e.task.desc.slice(0,300)+"...")),r.a.createElement(_.a,{open:n,onClose:c,"aria-labelledby":"form-dialog-title"},r.a.createElement(K.a,{id:"form-dialog-title"},e.task.title),r.a.createElement(Z.a,null,r.a.createElement(M.a,{container:!0,spacing:1},r.a.createElement(M.a,{item:!0,xs:6},r.a.createElement(y.a,{variant:"h6",component:"h2"},"Description"),r.a.createElement(y.a,{variant:"body2",component:"p"},""!==e.task.desc?e.task.desc:"(No description provided)")),r.a.createElement(M.a,{item:!0,xs:6},r.a.createElement(M.a,{container:!0,spacing:1},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(y.a,{variant:"h6",component:"h2"},"Columns"),e.task.columnRefs.map((function(a){return r.a.createElement(Qe.a,{key:a,label:e.allColumnNames[a],color:"primary",size:"small",style:{margin:"3px"}})})))),r.a.createElement(M.a,{container:!0,spacing:1},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(y.a,{variant:"h6",component:"h2"},"Due Date"),r.a.createElement(y.a,{variant:"body2",component:"p"},null===e.task.date&&"(No due date)",null!==e.task.date&&r.a.createElement(r.a.Fragment,null,Ea()(e.task.date.toDate(),"mm/dd/yyyy"),r.a.createElement(k.a,{variant:"outlined",size:"small",color:"primary",style:{float:"right"}},"View on calendar"))))),r.a.createElement(M.a,{container:!0,spacing:1},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(y.a,{variant:"h6",component:"h2"},"Users"),0===e.task.users.length&&r.a.createElement(y.a,{variant:"body2",component:"p"},"(No users assigned to task)"),e.task.users.length>0&&e.task.users.map((function(e){return r.a.createElement(Qe.a,{key:e,label:e,color:"primary",size:"small",style:{margin:"3px"}})}))))),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(y.a,{variant:"h6",component:"h2"},"Documents"),r.a.createElement(_e.a,{component:"nav"},r.a.createElement(qe.a,{button:!0},r.a.createElement(ba.a,null,r.a.createElement(pa.a,null)),r.a.createElement(Ze.a,{primary:"Placeholder_Document.docx"})),r.a.createElement(Ye.a,null),r.a.createElement(qe.a,{button:!0},r.a.createElement(ba.a,null,r.a.createElement(pa.a,null)),r.a.createElement(Ze.a,{primary:"Placeholder_Document.pdf"})),r.a.createElement(Ye.a,null),r.a.createElement(qe.a,{button:!0},r.a.createElement(ba.a,null,r.a.createElement(pa.a,null)),r.a.createElement(Ze.a,{primary:"Placeholder_Document.png"})))),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(y.a,{variant:"h6",component:"h2"},"Checklist"),(!e.task.checklist||!Array.isArray(e.task.checklist)||0===e.task.checklist.length)&&r.a.createElement(y.a,{variant:"body2",component:"p"},"(No checklist items assigned to task)"),e.task.checklist&&Array.isArray(e.task.checklist)&&e.task.checklist.length>0&&r.a.createElement(ze.a,{component:"fieldset"},r.a.createElement(Ve.a,null,e.task.checklist.map((function(a,t){return r.a.createElement(Me.a,{key:t,control:r.a.createElement(Ue.a,{checked:a.completed,onClick:function(a){return function(a,t){var n=e.task.checklist.slice(0);n[t].completed=a.target.checked,e.boardRef.ref.collection("tasks").doc(e.taskRef.id).update({checklist:n})}(a,t)}}),label:a.text})}))))),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(y.a,{variant:"h6",component:"h2"},"Comments"),r.a.createElement(y.a,{variant:"body2",component:"p"},"To be designed later")))),r.a.createElement(q.a,null,r.a.createElement(k.a,{onClick:c},"View connected tasks"),!e.lockFunctionality&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{onClick:function(){re.runTransaction(function(){var a=Object(ke.a)(ye.a.mark((function a(t){return ye.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.boardRef.ref.collection("tasks").doc(e.taskRef.id).delete();case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).then((function(a){console.log(e.task.title),re.collection("boards").doc(e.boardRef.id).collection("history").add({user:o.email,taskName:e.task.title,action:8,timestamp:oe.database.ServerValue}).catch((function(e){console.log("Error logging delete task: "+e)}))})),l(!1)},color:"secondary"},"Delete"),r.a.createElement(k.a,{onClick:c},"Edit")),r.a.createElement(k.a,{onClick:c,color:"primary"},"Close"))))},va=t(198),ya=t.n(va);var ka=function(e){var a=r.a.useState(!1),t=Object(h.a)(a,2),n=t[0],l=t[1],o=r.a.useState(!1),c=Object(h.a)(o,2),i=c[0],s=c[1],u=r.a.useState(""),m=Object(h.a)(u,2),d=m[0],b=m[1],f=r.a.useState(!0),p=Object(h.a)(f,2),E=p[0],g=p[1],v=JSON.parse(localStorage.getItem("user")),y=[],O=!0,w=!1,S=void 0;try{for(var x,j=e.columns[Symbol.iterator]();!(O=(x=j.next()).done);O=!0){var R=x.value;y.push(R.label)}}catch(G){w=!0,S=G}finally{try{O||null==j.return||j.return()}finally{if(w)throw S}}var N=function(){l(!1)},B=function(){s(!1),b("")};return r.a.createElement("div",{style:{display:"inline"}},r.a.createElement(C.a,{edge:"end","aria-label":"edit column",color:"inherit",onClick:function(){B(),l(!0)}},r.a.createElement(ya.a,null)),r.a.createElement(_.a,{open:n,onClose:N,"aria-labelledby":"form-dialog-title"},r.a.createElement(K.a,{id:"form-dialog-title"},"Edit column"),r.a.createElement(Z.a,null,r.a.createElement(I.a,{autoFocus:!0,margin:"dense",id:"columnName",label:"Rename column",variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0},error:i,helperText:d,defaultValue:e.column.label}),r.a.createElement(Ye.a,{style:{margin:10}}),r.a.createElement($.a,null,"Type the name of the column to confirm deletion.",r.a.createElement("br",null),r.a.createElement("br",null),"Warning: this cannot be undone. Any tasks associated with only this column will be lost."),r.a.createElement(I.a,{margin:"dense",id:"columnDeleteConfirmation",label:"Column name confirmation",variant:"outlined",fullWidth:!0,color:"secondary",onChange:function(a){a.target.value===e.column.label?g(!1):g(!0)},InputLabelProps:{shrink:!0}})),r.a.createElement(q.a,null,r.a.createElement(k.a,{onClick:N},"Cancel"),r.a.createElement(k.a,{onClick:function(){document.getElementById("columnDeleteConfirmation").value===e.column.label&&(l(!1),re.runTransaction(function(){var a=Object(ke.a)(ye.a.mark((function a(t){var n,r;return ye.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,re.collection("boards").doc(e.boardRef.id).collection("columnGroups").doc(e.columnGroupRef.id);case 2:return n=a.sent,a.next=5,n.get();case 5:return a.t0=function(a){return a!==e.column.id},r=a.sent.data().columnOrder.filter(a.t0),e.column.taskRefs.forEach(function(){var a=Object(ke.a)(ye.a.mark((function a(t){var n,r;return ye.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=re.collection("boards").doc(e.boardRef.id).collection("tasks").doc(t),a.next=3,n.get();case 3:1===(r=a.sent.data().columnRefs).length?n.delete():n.update({columnRefs:r.filter((function(a){return a!==e.column.id}))});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),a.next=10,n.collection("columns").doc(e.column.id).delete();case 10:return a.next=12,n.update({columnOrder:r});case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).then((function(a){re.collection("boards").doc(e.boardRef.id).collection("history").add({user:v.email,colName:e.column.label,action:6,timestamp:oe.database.ServerValue}).catch((function(e){console.log("Error logging delete column: "+e)}))})))},disabled:E,color:"secondary"},"Delete column"),r.a.createElement(k.a,{onClick:function(){var a=document.getElementById("columnName").value.trim();B(),""===a?(s(!0),b("Column name is required")):a.length>50?(s(!0),b("Column name must be less than 50 characters")):y.includes(a)&&a!==e.column.label?(s(!0),b("Column name is already in use")):(l(!1),re.collection("boards").doc(e.boardRef.id).collection("columnGroups").doc(e.columnGroupRef.id).collection("columns").doc(e.column.id).update({label:a}).then((function(t){re.collection("boards").doc(e.boardRef.id).collection("history").add({user:v.email,colName:a,action:5,timestamp:oe.database.ServerValue}).catch((function(e){console.log("Error logging edit column: "+e)}))})))},color:"primary"},"Save changes"))))};var Ca=function(e){var a=JSON.parse(localStorage.getItem("user")),t=e.column.taskRefs||[],n=e.taskRefs.filter((function(e){return t.includes(e.id)}));return"titleAsc"===e.sortMode?n.sort((function(e,a){return e.data().title.localeCompare(a.data().title)})):"titleDesc"===e.sortMode?n.sort((function(e,a){return a.data().title.localeCompare(e.data().title)})):"date"===e.sortMode?n.sort((function(e,a){var t=e.data().date,n=a.data().date;return null===t&&null===n?e.data().title.localeCompare(a.data().title):null===t?1:null===n?-1:t.toDate().getTime()===n.toDate().getTime()?e.data().title.localeCompare(a.data().title):t.toDate().getTime()-n.toDate().getTime()})):"users"===e.sortMode?n.sort((function(e,t){var n=e.data().users.includes(a.email);return n===t.data().users.includes(a.email)?e.data().title.localeCompare(t.data().title):n?-1:1})):n.sort((function(e,a){return t.indexOf(e.id)-t.indexOf(a.id)})),r.a.createElement(ua.a,{style:{margin:5,width:300}},r.a.createElement(y.a,{variant:"h6",color:"inherit"},e.column.label,!e.lockFunctionality&&r.a.createElement(ka,{column:e.column,columns:e.columns,boardRef:e.boardRef,columnGroupRef:e.columnGroupRef})),r.a.createElement("div",{style:{overflow:"auto",height:"800px"}}," ",n.map((function(a){return r.a.createElement(ga,{boardRef:e.boardRef,key:a.id,taskRef:a,task:a.data(),allColumnNames:e.allColumnNames,lockFunctionality:e.lockFunctionality})}))))};var Oa=function(e){var a=e.columnGroup?e.columnGroup.columnOrder:[],t=e.columns.filter((function(e){return a.includes(e.id)}));t.sort((function(e,t){return a.indexOf(e.id)-a.indexOf(t.id)}));for(var n={},l=0;l<e.allCols.length;l++)for(var o=0;o<e.allCols[l].length;o++){var c=e.allCols[l][o];n[c.id]=c.label}return r.a.createElement("div",{style:{maxWidth:"calc(100% - 10px - 10px)",height:"100%",padding:"10px 10px 0px 10px",display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",float:"left"}},r.a.createElement(sa.a,{style:{flexWrap:"nowrap"}},t.map((function(a){return r.a.createElement(Ca,{key:a.label,column:a,columns:t,boardRef:e.boardRef,columnGroupRef:e.columnGroupRef,taskRefs:e.taskRefs.filter((function(e){return e.data().columnRefs.includes(a.id)})),allColumnNames:n,lockFunctionality:e.lockFunctionality,sortMode:e.sortMode})}))))},wa=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(u.a)(this,Object(m.a)(a).call(this,e))).columnsSub=[],t.state={taskRefs:{},allColumns:{}},t}return Object(d.a)(a,e),Object(s.a)(a,[{key:"componentDidMount",value:function(){this.loadBoard()}},{key:"loadBoard",value:function(){var e=this;this.boardSub=le.loadBoard(this.props.boardId).subscribe((function(a){a.exists?(e.setState({boardRef:a}),e.loadColGroup(a),e.loadTasks(a),e.loadAllColGroups(a)):e.props.history.push("/boards")}))}},{key:"loadColGroup",value:function(e){var a=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.colGroupSub&&this.colGroupSub.unsubscribe();var n=e.ref.collection("columnGroups");(t=t||e.data().defaultColumnGroup).length?this.colGroupSub=le.loadColumnGroup(e,t).subscribe((function(e){a.setState({colGroupRef:e}),a.loadColumns(e)})):this.colGroupSub=n.limit(1).onSnapshot((function(e){a.setState({colGroupRef:e.docs[0]}),a.loadColumns(e.docs[0])}))}},{key:"loadAllColGroups",value:function(e){var a=this;this.colGroupsSub=e.ref.collection("columnGroups").onSnapshot((function(e){a.setState({colGroups:e.docs}),a.loadAllColumns(e)}))}},{key:"loadAllColumns",value:function(e){var a=this;e.forEach((function(e){a.columnsSub.push(e.ref.collection("columns").onSnapshot((function(t){var n=Object.assign({},a.state.allColumns);n[e.id]=t.docs,a.setState({allColumns:n}),console.log(a.state.allColumns)})))}))}},{key:"loadColumns",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.colSub&&this.colSub.unsubscribe(),this.colSub=le.loadColumns(a||this.state.colGroupRef).subscribe((function(a){e.setState({columnRefs:a.docs})}))}},{key:"loadTasks",value:function(e){var a=this;this.taskSub&&this.taskSub.unsubscribe(),this.taskSub=le.loadTasks(e).subscribe((function(e){a.setState({taskRefs:e.docs})}))}},{key:"componentWillUnmount",value:function(){this.boardSub&&this.boardSub.unsubscribe(),this.colSub&&this.colSub.unsubscribe(),this.colGroupSub&&this.colGroupSub.unsubscribe(),this.taskSub&&this.taskSub.unsubscribe(),this.colGroupsSub&&this.colGroupsSub(),this.columnsSub.forEach((function(e){return e()}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ia,{boardRef:this.state.boardRef?this.state.boardRef:{},board:this.state.boardRef?this.state.boardRef.data():{},columnGroupRef:this.state.colGroupRef?this.state.colGroupRef:{},columns:this.state.columnRefs?this.state.columnRefs.map((function(e){var a=e.data();return a.id=e.id,a})):[],allColGroups:this.state.colGroups?this.state.colGroups:[],allCols:this.state.allColumns?this.state.allColumns:{},lockFunctionality:this.props.lockFunctionality}),r.a.createElement(Oa,{boardRef:this.state.boardRef?this.state.boardRef:{},columnGroupRef:this.state.colGroupRef?this.state.colGroupRef:{},columns:this.state.columnRefs?this.state.columnRefs.map((function(e){var a=e.data();return a.id=e.id,a})):[],columnGroup:this.state.colGroupRef?this.state.colGroupRef.data():{},taskRefs:this.state.taskRefs,allCols:this.state.allColumns?this.state.allColumns:{},lockFunctionality:this.props.lockFunctionality,sortMode:this.props.sortMode}))}}]),a}(r.a.Component),Sa=function(e){var a=Object(p.a)(),t=Object(b.g)(),n=JSON.parse(localStorage.getItem("user"));oe.firestore().collection("boards").where("userRefs","array-contains",n.email).get().then((function(a){var n=!0,r=!1,l=void 0;try{for(var o,c=a.docs[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){if(o.value.id===e.match.params.boardId)return}}catch(i){r=!0,l=i}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}t.push("/boards")})).catch((function(e){t.push("/boards")}));var l=null;return a.location.search&&a.location.search.startsWith("?sort=")&&(l=a.location.search.substring(6),["titleAsc","titleDesc","date","users"].includes(l)||(l=null)),r.a.createElement("div",null,r.a.createElement(V,{location:a.location.pathname,sortMode:l}),r.a.createElement(wa,{history:t,boardId:e.match.params.boardId,sortMode:l,lockFunctionality:null!==l}))},xa=t(525);var ja=function(e){return r.a.createElement(M.a,{container:!0,style:{padding:"10px 10px 0px 10px"}},r.a.createElement(ge.a,{"aria-label":"breadcrumbs"},r.a.createElement(xa.a,{color:"inherit",href:"/boards"},"Boards"),r.a.createElement(xa.a,{color:"inherit",href:"/board/"+e.board.id},e.board.label),r.a.createElement(y.a,{color:"textPrimary"},e.currentPageName)))};var Ra=function(e){var a=r.a.useState(!1),t=Object(h.a)(a,2),n=t[0],l=t[1],o=r.a.useState(!0),c=Object(h.a)(o,2),i=c[0],s=c[1],u=Object(b.g)(),m=function(){l(!1)};return r.a.createElement("div",null,r.a.createElement(k.a,{onClick:function(){s(!0),l(!0)},variant:"contained",color:"secondary"},"Delete board"),r.a.createElement(_.a,{open:n,onClose:m,"aria-labelledby":"form-dialog-title"},r.a.createElement(K.a,{id:"form-dialog-title"},"Delete board"),r.a.createElement(Z.a,null,r.a.createElement($.a,null,"Type the board name to confirm deletion of the board.",r.a.createElement("br",null),r.a.createElement("br",null),"Warning: this cannot be undone."),r.a.createElement(I.a,{onChange:function(a){a.target.value===e.board.label?s(!1):s(!0)},autoFocus:!0,margin:"dense",id:"confirmDeleteBoard",label:"Board name",variant:"outlined",fullWidth:!0,color:"secondary",InputLabelProps:{shrink:!0}})),r.a.createElement(q.a,null,r.a.createElement(k.a,{onClick:m},"Cancel"),r.a.createElement(k.a,{onClick:function(){return function(a){if(l(!1),a===e.board.label){var t=e.board.id,n=re.collection("boards").doc(t).path;oe.functions().httpsCallable("recursiveDelete")({path:n}).then((function(e){u.push("/boards")})).catch((function(e){console.log(e)}))}}(document.getElementById("confirmDeleteBoard").value)},color:"secondary",disabled:i},"Delete board"))))};function Ia(e){return r.a.createElement(H.a,Object.assign({elevation:6,variant:"filled"},e))}var Na=Object(se.a)((function(e){return{settingsBody:{flexGrow:1,padding:20,paddingRight:200,paddingLeft:200},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,marginBottom:20},button:{marginRight:5,marginLeft:5},textField:{width:"80%"},chip:{marginRight:5,marginLeft:5}}}));var Ba=function(e){var a=Na(),t=r.a.useState(!1),n=Object(h.a)(t,2),l=n[0],o=n[1],c=r.a.useState(""),i=Object(h.a)(c,2),s=i[0],u=i[1],m=r.a.useState(!1),d=Object(h.a)(m,2),b=d[0],f=d[1],p=r.a.useState(""),E=Object(h.a)(p,2),g=E[0],v=E[1],y=r.a.useState(!1),C=Object(h.a)(y,2),O=C[0],w=C[1],S=r.a.useState(!1),x=Object(h.a)(S,2),j=x[0],R=x[1],N=r.a.useState(!1),B=Object(h.a)(N,2),G=B[0],F=B[1],D=r.a.useState(""),P=Object(h.a)(D,2),T=P[0],L=P[1],A=r.a.useState(""),W=Object(h.a)(A,2),z=W[0],V=W[1],H=JSON.parse(localStorage.getItem("user")),_=/^(([^<>()[\]\\.,;:\s@']+(\.[^<>()[\]\\.,;:\s@']+)*)|('.+'))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function q(){o(!1),u(""),f(!1),v(""),w(!1),R(!1),F(!1),L("")}var Z=function(e,a){"clickaway"!==a&&(R(!1),w(!1))};return r.a.createElement("div",{className:a.settingsBody},r.a.createElement(U.a,{className:a.paper},r.a.createElement(M.a,{container:!0,spacing:3},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement("h2",null,"Board Details")),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(I.a,{id:"boardName",label:"Name",error:l,helperText:s,variant:"outlined",className:a.textField,InputLabelProps:{shrink:!0},key:e.board.label,defaultValue:e.board.label})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(I.a,{id:"boardDescription",label:"Description (optional)",error:b,helperText:g,variant:"outlined",className:a.textField,multiline:!0,rows:5,InputLabelProps:{shrink:!0},key:e.board.description,defaultValue:e.board.description})),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:function(){if(q(),e.board){var a=document.getElementById("boardName").value.trim(),t=document.getElementById("boardDescription").value.trim();""===a?(o(!0),u("Board name cannot be empty!")):a.length>50?(o(!0),u("Board name must be less than 50 characters long!")):t.length>150?(f(!0),v("Board description must be less than 150 characters long!")):""===t?(f(!0),v("Board description cannot be empty!")):(re.collection("boards").doc(e.board.id).update({label:a,description:t}).then((function(a){re.collection("boards").doc(e.board.id).collection("history").add({user:H.email,action:1,timestamp:oe.database.ServerValue}).catch((function(e){console.log("Error logging board update: "+e)}))})).catch((function(e){R(!0),console.log(e)})),V("Successfully saved board details!"),w(!0))}}},"Save changes")))),r.a.createElement(U.a,{className:a.paper},r.a.createElement(M.a,{container:!0,spacing:3},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement("h2",null,"Collaborators")),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(I.a,{id:"inviteEmail",error:G,helperText:T,label:"Add a user by email address",type:"email",variant:"outlined",className:a.textField,style:{width:"70%"}}),r.a.createElement(k.a,{variant:"contained",color:"primary",style:{height:"100%",width:"10%"},onClick:function(){return a=document.getElementById("inviteEmail").value.trim(),q(),void(""===a?(F(!0),L("Email is required")):_.test(a)?te.fetchSignInMethodsForEmail(a).then((function(t){t.length>=1?re.collection("boards").doc(e.board.id).update({userRefs:oe.firestore.FieldValue.arrayUnion(a)}).then((function(e){document.getElementById("inviteEmail").value="",w(!0),V("Successfully invited "+a+"!")})).catch((function(e){console.log(e)})):0===t.length&&(F(!0),L("User does not exist!"))})).then((function(t){re.collection("boards").doc(e.board.id).collection("history").add({user:H.email,user2:a,action:2,timestamp:oe.database.ServerValue}).catch((function(e){console.log("Error logging inviting user: "+e)}))})).catch((function(e){console.log(e)})):(F(!0),L("Email must be properly formatted")));var a}},"Add user")),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(na.a,{style:{width:"80%",marginRight:"auto",marginLeft:"auto"}},r.a.createElement(ea.a,{size:"small"},r.a.createElement(ra.a,null,r.a.createElement(la.a,null,r.a.createElement(ta.a,null,"Role"),r.a.createElement(ta.a,null,"Email"),r.a.createElement(ta.a,{align:"right"},"Can edit"))),r.a.createElement(aa.a,null,r.a.createElement(la.a,null,r.a.createElement(ta.a,null,"Owner"),r.a.createElement(ta.a,null,e.board&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Qe.a,{label:e.board.owner,color:"primary",className:a.chip}))),r.a.createElement(ta.a,{align:"right"},r.a.createElement(oa.a,{checked:!0,disabled:!0,color:"primary"}))),e.board&&e.board.userRefs&&r.a.createElement(r.a.Fragment,null,e.board.userRefs.filter((function(a){return a!==e.board.owner})).map((function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(la.a,null,r.a.createElement(ta.a,null,"Member"),r.a.createElement(ta.a,null,r.a.createElement(Qe.a,{label:t,color:"primary",key:t,className:a.chip,variant:"outlined",onDelete:function(){return a=t,void re.collection("boards").doc(e.board.id).update({userRefs:oe.firestore.FieldValue.arrayRemove(a)}).then((function(t){w(!0),V("Successfully removed "+a+"!"),re.collection("boards").doc(e.board.id).collection("history").add({user:H.email,user2:a,action:3,timestamp:oe.database.ServerValue}).catch((function(e){console.log("Error logging removing user: "+e)}))})).catch((function(e){console.log(e)}));var a}})),r.a.createElement(ta.a,{align:"right"},r.a.createElement(oa.a,{checked:!0,color:"primary"}))))}))))))))),r.a.createElement(U.a,{className:a.paper},r.a.createElement(M.a,{container:!0,spacing:3},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement("h2",null,"Here be dragons")),r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement(Ra,{board:e.board})))),r.a.createElement(J.a,{open:O,onClose:Z},r.a.createElement(Ia,{onClose:Z,autoHideDuration:6e3,severity:"success"},z)),r.a.createElement(J.a,{open:j,onClose:Z},r.a.createElement(Ia,{onClose:Z,autoHideDuration:6e3,severity:"success"},"There was an error saving board details!")))},Ga=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(u.a)(this,Object(m.a)(a).call(this,e))).state={},t.loadBoard(),t}return Object(d.a)(a,e),Object(s.a)(a,[{key:"loadBoard",value:function(){var e=this;this.boardSub&&this.boardSub(),this.boardSub=re.collection("boards").doc(this.props.boardId).onSnapshot((function(a){var t=a.data();void 0!==t&&(t.id=a.id,e.setState({board:t}))}))}},{key:"componentWillUnmount",value:function(){this.boardSub&&this.boardSub()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ja,{currentPageName:"Settings",board:this.state.board?this.state.board:{}}),r.a.createElement(Ba,{board:this.state.board?this.state.board:{}}))}}]),a}(r.a.Component),Fa=function(e){function a(e){var t;Object(i.a)(this,a),(t=Object(u.a)(this,Object(m.a)(a).call(this,e))).viewableHistory=Object(p.a)();var n=JSON.parse(localStorage.getItem("user"));return re.collection("boards").doc(e.match.params.boardId).get().then((function(e){e.exists&&e.data().owner===n.email||t.props.history.push("/boards")})).catch((function(e){t.props.history.push("/boards")})),t}return Object(d.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(V,{location:this.viewableHistory.location.pathname}),r.a.createElement(Ga,{boardId:this.props.match.params.boardId}))}}]),a}(r.a.Component),Da=t(349),Pa=t.n(Da),Ta=t(354),La=t.n(Ta),Aa=t(363),Wa=t.n(Aa),za=t(355),Va=t.n(za),Ma=t(361),Ua=t.n(Ma),Ha=t(253),Ja=t.n(Ha),_a=t(252),qa=t.n(_a),Za=t(356),$a=t.n(Za),Ka=t(358),Ya=t.n(Ka),Qa=t(359),Xa=t.n(Qa),et=t(360),at=t.n(et),tt=t(364),nt=t.n(tt),rt=t(357),lt=t.n(rt),ot=t(362),ct=t.n(ot),it=t(365),st=t.n(it),ut={Add:Object(n.forwardRef)((function(e,a){return r.a.createElement(La.a,Object.assign({},e,{ref:a}))})),Check:Object(n.forwardRef)((function(e,a){return r.a.createElement(Va.a,Object.assign({},e,{ref:a}))})),Clear:Object(n.forwardRef)((function(e,a){return r.a.createElement(qa.a,Object.assign({},e,{ref:a}))})),Delete:Object(n.forwardRef)((function(e,a){return r.a.createElement($a.a,Object.assign({},e,{ref:a}))})),DetailPanel:Object(n.forwardRef)((function(e,a){return r.a.createElement(Ja.a,Object.assign({},e,{ref:a}))})),Edit:Object(n.forwardRef)((function(e,a){return r.a.createElement(ya.a,Object.assign({},e,{ref:a}))})),Export:Object(n.forwardRef)((function(e,a){return r.a.createElement(lt.a,Object.assign({},e,{ref:a}))})),Filter:Object(n.forwardRef)((function(e,a){return r.a.createElement(Ya.a,Object.assign({},e,{ref:a}))})),FirstPage:Object(n.forwardRef)((function(e,a){return r.a.createElement(Xa.a,Object.assign({},e,{ref:a}))})),LastPage:Object(n.forwardRef)((function(e,a){return r.a.createElement(at.a,Object.assign({},e,{ref:a}))})),NextPage:Object(n.forwardRef)((function(e,a){return r.a.createElement(Ja.a,Object.assign({},e,{ref:a}))})),PreviousPage:Object(n.forwardRef)((function(e,a){return r.a.createElement(Ua.a,Object.assign({},e,{ref:a}))})),ResetSearch:Object(n.forwardRef)((function(e,a){return r.a.createElement(qa.a,Object.assign({},e,{ref:a}))})),Search:Object(n.forwardRef)((function(e,a){return r.a.createElement(ct.a,Object.assign({},e,{ref:a}))})),SortArrow:Object(n.forwardRef)((function(e,a){return r.a.createElement(Wa.a,Object.assign({},e,{ref:a}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,a){return r.a.createElement(nt.a,Object.assign({},e,{ref:a}))})),ViewColumn:Object(n.forwardRef)((function(e,a){return r.a.createElement(st.a,Object.assign({},e,{ref:a}))}))},mt=Object(se.a)((function(e){return{settingsBody:{flexGrow:1,padding:20,paddingRight:200,paddingLeft:200},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,marginBottom:20},button:{marginRight:5,marginLeft:5},textField:{width:"80%"},chip:{marginRight:5,marginLeft:5}}}));var dt=function(e){var a=mt();return r.a.createElement("div",{className:a.settingsBody},r.a.createElement(U.a,{className:a.paper},r.a.createElement(M.a,{container:!0,spacing:3},r.a.createElement(M.a,{item:!0,xs:12},r.a.createElement("h2",null,"Board History"),r.a.createElement(Pa.a,{icons:ut,columns:[{title:"Date",field:"PLACEHOLDER"},{title:"User",field:"PLACEHOLDER"},{title:"Action",field:"PLACEHOLDER"}],title:""})))))},bt=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(u.a)(this,Object(m.a)(a).call(this,e))).state={},t.loadBoard(),t}return Object(d.a)(a,e),Object(s.a)(a,[{key:"loadBoard",value:function(){var e=this;this.boardSub&&this.boardSub(),this.boardSub=re.collection("boards").doc(this.props.boardId).onSnapshot((function(a){var t=a.data();t.id=a.id,e.setState({board:t})}))}},{key:"componentWillUnmount",value:function(){this.boardSub&&this.boardSub()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ja,{currentPageName:"History",board:this.state.board?this.state.board:{}}),r.a.createElement(dt,{board:this.state.board}))}}]),a}(r.a.Component),ft=function(e){var a=Object(p.a)(),t=Object(b.g)(),n=JSON.parse(localStorage.getItem("user"));return oe.firestore().collection("boards").where("userRefs","array-contains",n.email).get().then((function(a){var n=!0,r=!1,l=void 0;try{for(var o,c=a.docs[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){if(o.value.id===e.match.params.boardId)return}}catch(i){r=!0,l=i}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}t.push("/boards")})).catch((function(e){t.push("/boards")})),r.a.createElement("div",null,r.a.createElement(V,{location:a.location.pathname}),r.a.createElement(bt,{boardId:e.match.params.boardId}))},pt=function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.props,a=e.component,t=Object(c.a)(e,["component"]);return r.a.createElement(b.b,Object.assign({},t,{render:function(e){return null!==localStorage.getItem("user")?r.a.createElement(a,e):r.a.createElement(b.a,{to:"/login"})}}))}}]),a}(r.a.Component),ht=function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.props,a=e.component,t=Object(c.a)(e,["component"]);return r.a.createElement(b.b,Object.assign({},t,{render:function(e){return null===localStorage.getItem("user")?r.a.createElement(a,e):r.a.createElement(b.a,{to:"/boards"})}}))}}]),a}(r.a.Component);var Et=function(){return r.a.createElement(f.a,null,r.a.createElement(b.d,null,r.a.createElement(ht,{path:"/login",component:be}),r.a.createElement(ht,{path:"/register",component:Ee}),r.a.createElement(pt,{path:"/boards",component:Be}),r.a.createElement(pt,{path:"/board/:boardId/settings",component:Fa}),r.a.createElement(pt,{path:"/board/:boardId/history",component:ft}),r.a.createElement(pt,{path:"/board/:boardId",component:Sa}),r.a.createElement(b.b,{path:"/"},r.a.createElement(b.a,{to:"/login"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Et,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[372,1,2]]]);
//# sourceMappingURL=main.5078b4a6.chunk.js.map